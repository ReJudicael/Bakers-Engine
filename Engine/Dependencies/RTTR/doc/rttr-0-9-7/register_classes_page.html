<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.8.17"/>
        <script type="text/javascript" src="jquery.min.js"></script>
        <title>rttr: Classes</title>
        <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="dynsections.js"></script>
        <link rel = "shortcut icon" type = "image/x-icon" href = "favicon.ico">
        <link rel = "stylesheet" href = "fonts/ptsans_regular_macroman/stylesheet.css">
        <link rel = "stylesheet" href = "fonts/source_code_pro_regular/stylesheet.css">
        <link href="doxygen.css" rel="stylesheet" type="text/css" />
        <link href="custom-doxygen.css" rel="stylesheet" type="text/css"/>
        <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="custom-bootstrap.css">
        <script src="bootstrap/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="doxy-boot.js"></script>
    </head>
    <body>
     <!--
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand">rttr 0.9.7</a>
                </div>
            </div>
        </nav>
        -->
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel panel-default" style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Classes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>For registering classes in RTTR you use a class called <a class="el" href="classrttr_1_1registration_1_1class__.html">registration::class_&lt;T&gt;</a>. Its name is supposed to resemble the C++ keyword, to make it look more intuitive. It has member functions for register <a class="el" href="classrttr_1_1registration_1_1class__.html#a0c0f9b9b4a78e8eefb17f690f15e7795">constructors</a>, <a class="el" href="classrttr_1_1registration_1_1class__.html#a1e2a392693ad3d5b62ea85abdd1d6111">properties</a>, <a class="el" href="classrttr_1_1registration_1_1class__.html#a8bbc90d48413ac8b5e172d9cc4e4019f">methods</a> and <a class="el" href="classrttr_1_1registration_1_1class__.html#aba426c0d413489992f1ff38b43c9a889">enums</a>. These functions have the same interface and work in the same way like register the global symbols. Every call to these member functions, will return <a class="el" href="classrttr_1_1registration_1_1bind.html">bind</a> object, in order to chain more registration calls.</p>
<p>Let's start with a simple example. Consider the following C++ class:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;rttr/type&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// test class.h</span></div>
<div class="line"><span class="keyword">struct </span>test_class</div>
<div class="line">{</div>
<div class="line">    test_class(<span class="keywordtype">int</span> <a class="code" href="namespacerttr.html#a54ecd8bad715cbc451e7aa8491667d4a">value</a>) : m_value(<a class="code" href="namespacerttr.html#a54ecd8bad715cbc451e7aa8491667d4a">value</a>) {}</div>
<div class="line">    <span class="keywordtype">void</span> print_value()<span class="keyword"> const </span>{ std::cout &lt;&lt; m_value; }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> m_value;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="rttr__enable_8h.html#a848bcae21d3a54e07ca6450689820a59">RTTR_ENABLE</a>()</div>
<div class="line">};</div>
</div><!-- fragment --><p>The registration process is now done at global scope in the cpp file.</p>
<div class="fragment"><div class="line"><span class="comment">// test_class.cpp</span></div>
<div class="line"><span class="preprocessor">#include &lt;rttr/registration&gt;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="registration_8h.html#ac6326400f16225ee15b52eabcaae8130">RTTR_REGISTRATION</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using namespace </span><a class="code" href="namespacerttr.html">rttr</a>;</div>
<div class="line">        </div>
<div class="line">    <a class="code" href="classrttr_1_1registration_1_1class__.html">registration::class_&lt;test_class&gt;</a>(<span class="stringliteral">&quot;test_class&quot;</span>)</div>
<div class="line">                 .<a class="code" href="classrttr_1_1registration_1_1class__.html#a0c0f9b9b4a78e8eefb17f690f15e7795">constructor</a>&lt;<span class="keywordtype">int</span>&gt;()</div>
<div class="line">                 .<a class="code" href="classrttr_1_1method.html">method</a>(<span class="stringliteral">&quot;print_value&quot;</span>, &amp;test_class::print_value)</div>
<div class="line">                 .property(<span class="stringliteral">&quot;value&quot;</span>, &amp;test_class::m_value);</div>
<div class="line">}</div>
</div><!-- fragment --><p>This will register the class <code>test_class</code> with a constructor that takes an integer as argument, a member function with the name <code>print_value</code> and a property called <code>value</code>.</p>
<p>The property name has to be unique for this class type, but derived classes can register another property with the same name again. Member functions can be overloaded, so a method can be registered with an already existing name multiple times. However when there exist a method with the same name and signature, then this function will not be registered and discarded.</p>
<h1><a class="anchor" id="autotoc_md71"></a>
Overloaded member functions</h1>
<p>In order to register a overloaded member function, you have to disambiguate the member function pointer you pass to <a class="el" href="classrttr_1_1registration_1_1class__.html#a8bbc90d48413ac8b5e172d9cc4e4019f">method</a>. Therefore a helper function can be used: <a class="el" href="namespacerttr.html#a1582d7d5b803f7dd5498a4a0166d382d">select_overload&lt;T&gt;(T (ClassType::*func))</a></p>
<p>Here's an example illustrating this:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>Foo</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">void</span> f() {}</div>
<div class="line">    <span class="keywordtype">void</span> f(<span class="keywordtype">int</span>) {}</div>
<div class="line">    <span class="keywordtype">void</span> f(<span class="keywordtype">int</span>)<span class="keyword"> const </span>{}</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code" href="registration_8h.html#ac6326400f16225ee15b52eabcaae8130">RTTR_REGISTRATION</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using namespace </span><a class="code" href="namespacerttr.html">rttr</a>;</div>
<div class="line">    </div>
<div class="line">    <a class="code" href="classrttr_1_1registration_1_1class__.html">registration::class_&lt;Foo&gt;</a>(<span class="stringliteral">&quot;Foo&quot;</span>)</div>
<div class="line">                 .<a class="code" href="classrttr_1_1registration_1_1class__.html#a8bbc90d48413ac8b5e172d9cc4e4019f">method</a>(<span class="stringliteral">&quot;f&quot;</span>, <a class="code" href="namespacerttr.html#a1582d7d5b803f7dd5498a4a0166d382d">select_overload</a>&lt;<span class="keywordtype">void</span>(<span class="keywordtype">void</span>)&gt;(&amp;Foo::f))</div>
<div class="line">                 .method(<span class="stringliteral">&quot;f&quot;</span>, <a class="code" href="namespacerttr.html#a1582d7d5b803f7dd5498a4a0166d382d">select_overload</a>&lt;<span class="keywordtype">void</span>(<span class="keywordtype">int</span>)&gt;(&amp;Foo::f))</div>
<div class="line">                 .method(<span class="stringliteral">&quot;f&quot;</span>, <a class="code" href="namespacerttr.html#ab5ab25763f38e207fba4461aeb307e4b">select_const</a>(&amp;Foo::f));                <span class="comment">// register a overloaded const method</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>The last function is a overloaded const function, use therefore the <a class="el" href="namespacerttr.html#ab5ab25763f38e207fba4461aeb307e4b">select_const()</a> function.</p>
<h1><a class="anchor" id="autotoc_md72"></a>
Register constructor</h1>
<p>RTTR allows your to register constructors for classes. Because C++ doesn't allow to retrieve the member function pointer of a constructor you have to explicit specify all data types of a constructor.</p>
<p>Consider following class with three constructors:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>Foo</div>
<div class="line">{</div>
<div class="line">    Foo();</div>
<div class="line">    Foo(<span class="keywordtype">int</span>, <span class="keywordtype">double</span>);</div>
<div class="line">    Foo(<span class="keyword">const</span> std::string&amp;);</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">static</span> Foo* create();</div>
<div class="line">};</div>
</div><!-- fragment --><p>For registering three <code>Foo</code> constructors you now have to specify every parameter as template parameter in the member function <a class="el" href="classrttr_1_1registration_1_1class__.html#a0c0f9b9b4a78e8eefb17f690f15e7795">constructor()</a>. As second option, it is possible to register a static function as constructor. In order to do this, just forward the function pointer.</p>
<div class="fragment"><div class="line"><a class="code" href="registration_8h.html#ac6326400f16225ee15b52eabcaae8130">RTTR_REGISTRATION</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using namespace </span><a class="code" href="namespacerttr.html">rttr</a>;</div>
<div class="line">    </div>
<div class="line">    <a class="code" href="classrttr_1_1registration_1_1class__.html">registration::class_&lt;Foo&gt;</a>(<span class="stringliteral">&quot;Foo&quot;</span>)</div>
<div class="line">                 .<a class="code" href="classrttr_1_1registration_1_1class__.html#a0c0f9b9b4a78e8eefb17f690f15e7795">constructor</a>&lt;&gt;()</div>
<div class="line">                 .<a class="code" href="classrttr_1_1constructor.html">constructor&lt;int,double&gt;</a>()</div>
<div class="line">                 .constructor&lt;<span class="keyword">const</span> std::string&amp;&gt;()</div>
<div class="line">                 .<a class="code" href="classrttr_1_1constructor.html">constructor</a>(&amp;Foo::create);</div>
<div class="line">}</div>
</div><!-- fragment --><p>When a constructor is registered a destructor is registered automatically. The used default policy for creating an instance is <a class="el" href="structrttr_1_1policy_1_1ctor.html#a40f2a2ef8f270cad3deabf1b83e8764c">policy::ctor::as_std_shared_ptr</a>.</p>
<h1><a class="anchor" id="autotoc_md73"></a>
Register class properties</h1>
<p>Register a public property can be easily done, consider following class:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>Foo</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> <a class="code" href="namespacerttr.html#a54ecd8bad715cbc451e7aa8491667d4a">value</a>;</div>
<div class="line">};</div>
</div><!-- fragment --><p>This class is registered like this:</p>
<div class="fragment"><div class="line"><a class="code" href="registration_8h.html#ac6326400f16225ee15b52eabcaae8130">RTTR_REGISTRATION</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using namespace </span><a class="code" href="namespacerttr.html">rttr</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classrttr_1_1registration_1_1class__.html">registration::class_&lt;Foo&gt;</a>()</div>
<div class="line">        .<a class="code" href="classrttr_1_1registration_1_1class__.html#a1e2a392693ad3d5b62ea85abdd1d6111">property</a>(<span class="stringliteral">&quot;value&quot;</span>, &amp;<a class="code" href="namespacerttr.html#a54ecd8bad715cbc451e7aa8491667d4a">Foo::value</a>);</div>
<div class="line">}</div>
</div><!-- fragment --><p>With the <a class="el" href="classrttr_1_1registration_1_1class__.html#a1e2a392693ad3d5b62ea85abdd1d6111">property()</a> member function you will register the member variable <code>Foo::value</code> with read and write access.</p>
<h2><a class="anchor" id="autotoc_md74"></a>
Read Only Properties</h2>
<p>When you want a register a property with <code>read-only</code> access, then this is also possible with <a class="el" href="classrttr_1_1registration_1_1class__.html#a44ca2d906d9b954c950d7217adeeb41e">property_readonly()</a> member function.</p>
<div class="fragment"><div class="line"><a class="code" href="registration_8h.html#ac6326400f16225ee15b52eabcaae8130">RTTR_REGISTRATION</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using namespace </span><a class="code" href="namespacerttr.html">rttr</a>;</div>
<div class="line">    </div>
<div class="line">    <a class="code" href="classrttr_1_1registration_1_1class__.html">registration::class_&lt;Foo&gt;</a>()</div>
<div class="line">        .<a class="code" href="classrttr_1_1registration_1_1class__.html#a44ca2d906d9b954c950d7217adeeb41e">property_readonly</a>(<span class="stringliteral">&quot;value&quot;</span>, &amp;<a class="code" href="namespacerttr.html#a54ecd8bad715cbc451e7aa8491667d4a">Foo::value</a>);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md75"></a>
Private Properties</h2>
<p>When you have a class and the property is declared in private scope, then you can still register this property when you insert the macro: <a class="el" href="registration__friend_8h.html#a307051b21da56e1ec8a63f0aa943797e">RTTR_REGISTRATION_FRIEND</a> inside the class. </p><div class="fragment"><div class="line"><span class="keyword">class </span>Foo</div>
<div class="line">{</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="keywordtype">int</span> <a class="code" href="namespacerttr.html#a54ecd8bad715cbc451e7aa8491667d4a">value</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="registration_8h.html#a307051b21da56e1ec8a63f0aa943797e">RTTR_REGISTRATION_FRIEND</a></div>
<div class="line">};</div>
</div><!-- fragment --><p>This will make this class a friend to the registration system.</p>
<h2><a class="anchor" id="autotoc_md76"></a>
Getter Setter For Properties</h2>
<p>You can also register getter and setter functions and make them look as if they were a public data member. Consider the following class: </p><div class="fragment"><div class="line"><span class="keyword">class </span>Foo</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keywordtype">void</span> set_value(<span class="keywordtype">int</span> x) { m_value = x; }</div>
<div class="line">    <span class="keywordtype">int</span> get_value()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_value; }</div>
<div class="line">    </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="keywordtype">int</span> m_value;</div>
<div class="line">};</div>
</div><!-- fragment --><p>This is the registration code:</p>
<div class="fragment"><div class="line"><a class="code" href="registration_8h.html#ac6326400f16225ee15b52eabcaae8130">RTTR_REGISTRATION</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using namespace </span><a class="code" href="namespacerttr.html">rttr</a>;</div>
<div class="line">    </div>
<div class="line">    <a class="code" href="classrttr_1_1registration_1_1class__.html">registration::class_&lt;Foo&gt;</a>()</div>
<div class="line">        .<a class="code" href="classrttr_1_1registration_1_1class__.html#a1e2a392693ad3d5b62ea85abdd1d6111">property</a>(<span class="stringliteral">&quot;value&quot;</span>, &amp;Foo::get_value, &amp;Foo::set_value);</div>
<div class="line">}</div>
</div><!-- fragment --><p>This way, accessing the property will now call these functions, instead the property directly. Remark that the getter function needs the be <code>const</code>.</p>
<p>The following sub sections will now show how to retrieve these informations for creating, invoking and setting properties of an instance of this class.</p>
<h1><a class="anchor" id="autotoc_md77"></a>
Access Level Of Class Members</h1>
<p>With RTTR it is also possible to specify on of the three access modifiers during the registration.</p>
<div class="fragment"><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacerttr.html">rttr</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>Foo</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    Foo() {}</div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">    <span class="keywordtype">void</span> func() {}</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="keywordtype">int</span> <a class="code" href="namespacerttr.html#a54ecd8bad715cbc451e7aa8491667d4a">value</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="registration_8h.html#a307051b21da56e1ec8a63f0aa943797e">RTTR_REGISTRATION_FRIEND</a></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><a class="code" href="registration_8h.html#ac6326400f16225ee15b52eabcaae8130">RTTR_REGISTRATION</a></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="classrttr_1_1registration_1_1class__.html">registration::class_&lt;Foo&gt;</a>(<span class="stringliteral">&quot;Foo&quot;</span>)</div>
<div class="line">                  .<a class="code" href="classrttr_1_1registration_1_1class__.html#a0c0f9b9b4a78e8eefb17f690f15e7795">constructor</a>&lt;&gt;(<a class="code" href="classrttr_1_1registration.html#a45df26a4b45b6715ac17e9a03594c369">registration::public_access</a>)   <span class="comment">// not necessary, because that is the default</span></div>
<div class="line">                  .<a class="code" href="classrttr_1_1method.html">method</a>(<span class="stringliteral">&quot;func&quot;</span>, &amp;Foo::func, <a class="code" href="classrttr_1_1registration.html#a5ac82a82df83ce2dd8c34ada18d7b904">registration::protected_access</a>)</div>
<div class="line">                  .property(<span class="stringliteral">&quot;value&quot;</span>, &amp;<a class="code" href="namespacerttr.html#a54ecd8bad715cbc451e7aa8491667d4a">Foo::value</a>, <a class="code" href="classrttr_1_1registration.html#a8920352ec53e1cd44bdec18ef5e89568">registration::private_access</a>);</div>
<div class="line">}</div>
</div><!-- fragment --><p>The access level has to be specified as last argument in the corresponding <a class="el" href="classrttr_1_1registration_1_1class__.html">class_</a> registration function. Use therefore one of the three static member variables in the <a class="el" href="classrttr_1_1registration.html">registration</a> class. This information can be retrieved at runtime for <a class="el" href="classrttr_1_1property.html#ae3d36f39f60d0aca13d4c6b039799c7d">properties</a>, <a class="el" href="classrttr_1_1method.html#ad77b3825aa9e8378d5e05f7fafe01525">methods</a> or <a class="el" href="classrttr_1_1constructor.html#acccb0f27a9d2e4beef2788c4b95baf20">constructors</a>. via the function <code>get_access_level()</code>, which will return a enum value of type <a class="el" href="namespacerttr.html#aa07db0e4984d0c48adc5d61f834d611b">access_levels</a>.</p>
<h1><a class="anchor" id="autotoc_md78"></a>
Create/destroy of classes</h1>
<p>There are two options for creating/destroying a class.</p><ol type="1">
<li>use just the <a class="el" href="classrttr_1_1type.html#ad44572a03514d83035580f516ebaf4e1">type</a> interface or</li>
<li>retrieve a <a class="el" href="classrttr_1_1constructor.html">constructor</a> and <a class="el" href="classrttr_1_1destructor.html">destructor</a> object from the <a class="el" href="classrttr_1_1type.html">type</a> class.</li>
</ol>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using namespace </span><a class="code" href="namespacerttr.html">rttr</a>;</div>
<div class="line">    <span class="comment">// option 1</span></div>
<div class="line">    <a class="code" href="classrttr_1_1type.html">type</a> class_type = <a class="code" href="classrttr_1_1type.html#a7ba79b9f4916c30db74fe65508dca033">type::get_by_name</a>(<span class="stringliteral">&quot;test_class&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (class_type)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="classrttr_1_1variant.html">variant</a> obj = class_type.<a class="code" href="classrttr_1_1type.html#ad44572a03514d83035580f516ebaf4e1">create</a>({23});</div>
<div class="line">        <span class="keywordflow">if</span> (obj.<a class="code" href="classrttr_1_1variant.html#a7a72579286ed164225c5be882ab6ea81">get_type</a>().<a class="code" href="classrttr_1_1type.html#a24a00513155d3e678454aa349b0caaa7">is_pointer</a>())</div>
<div class="line">            class_type.<a class="code" href="classrttr_1_1type.html#a33bc44604dae75f4368428afabf364ac">destroy</a>(obj);</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// option 2</span></div>
<div class="line">    <span class="keywordflow">if</span> (class_type)</div>
<div class="line">    {</div>
<div class="line">       <a class="code" href="classrttr_1_1constructor.html">constructor</a> ctor = class_type.<a class="code" href="classrttr_1_1type.html#ae1ed385e76752e7c02ffd9bf5a0ae410">get_constructor</a>({type::get&lt;int&gt;()});</div>
<div class="line">       <a class="code" href="classrttr_1_1variant.html">variant</a> obj = ctor.<a class="code" href="classrttr_1_1constructor.html#a9fe7a0a5c6583be4dbf9e7ebf4ca7f5e">invoke</a>(23);</div>
<div class="line">       <span class="keywordflow">if</span> (obj.<a class="code" href="classrttr_1_1variant.html#a7a72579286ed164225c5be882ab6ea81">get_type</a>().<a class="code" href="classrttr_1_1type.html#a24a00513155d3e678454aa349b0caaa7">is_pointer</a>())</div>
<div class="line">       {</div>
<div class="line">            <a class="code" href="classrttr_1_1destructor.html">destructor</a> dtor = class_type.<a class="code" href="classrttr_1_1type.html#a12d900648f71d11873896f58b1f9a3ac">get_destructor</a>();</div>
<div class="line">            dtor.<a class="code" href="classrttr_1_1destructor.html#a93d528bf4496174e7ab046dc714b2846">invoke</a>(obj);</div>
<div class="line">       }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>The objects which are constructed are created on the heap and stored as pointer in the variant object.</p>
<h1><a class="anchor" id="autotoc_md79"></a>
Invoke member functions</h1>
<p>Invoking a member function works in the same way like invoking global function. The only difference is, that you have to provide the instance of the class.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using namespace </span><a class="code" href="namespacerttr.html">rttr</a>;</div>
<div class="line">    </div>
<div class="line">    test_class obj(42);</div>
<div class="line">    <a class="code" href="classrttr_1_1type.html">type</a> class_type = <a class="code" href="classrttr_1_1type.html#a7ba79b9f4916c30db74fe65508dca033">type::get_by_name</a>(<span class="stringliteral">&quot;test_class&quot;</span>);</div>
<div class="line">    <span class="comment">// option 1</span></div>
<div class="line">    class_type.<a class="code" href="classrttr_1_1type.html#afc7329cac11337f4022d7d10eebe80d3">invoke</a>(<span class="stringliteral">&quot;print_value&quot;</span>, obj, {}); <span class="comment">// print 42</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// option 2</span></div>
<div class="line">    <a class="code" href="classrttr_1_1method.html">method</a> print_meth = class_type.<a class="code" href="classrttr_1_1type.html#a4d31b84c050f5b22509c16d0379fe0c7">get_method</a>(<span class="stringliteral">&quot;print_value&quot;</span>);</div>
<div class="line">    print_meth.<a class="code" href="classrttr_1_1method.html#aea4351075b4cbe6f2f2b6500cf226f20">invoke</a>(obj); <span class="comment">// prints &quot;42&quot;</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>The invoke function also except to use variants. So when you create the object via the type constructor you can use the returned variant to invoke a method:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using namespace </span><a class="code" href="namespacerttr.html">rttr</a>;</div>
<div class="line">    </div>
<div class="line">    <a class="code" href="classrttr_1_1variant.html">variant</a> obj_var = <a class="code" href="classrttr_1_1type.html#a7ba79b9f4916c30db74fe65508dca033">type::get_by_name</a>(<span class="stringliteral">&quot;test_class&quot;</span>).<a class="code" href="classrttr_1_1type.html#ad44572a03514d83035580f516ebaf4e1">create</a>({42});</div>
<div class="line">    <a class="code" href="classrttr_1_1type.html#a7ba79b9f4916c30db74fe65508dca033">type::get_by_name</a>(<span class="stringliteral">&quot;test_class&quot;</span>).<a class="code" href="classrttr_1_1type.html#afc7329cac11337f4022d7d10eebe80d3">invoke</a>(<span class="stringliteral">&quot;print_value&quot;</span>, obj_var, {}); <span class="comment">// print 42</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>It is possible to invoke a method, when the instance is wrapped inside a wrapper class, for example <code>std::shared_ptr&lt;T&gt;</code>.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    std::shared_ptr&lt;test_class&gt; obj = std::make_shared&lt;test_class&gt;(23);</div>
<div class="line"> </div>
<div class="line">    method meth = type::get_by_name(<span class="stringliteral">&quot;test_class&quot;</span>).get_method(<span class="stringliteral">&quot;print_value&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    method.<a class="code" href="classrttr_1_1method.html#aea4351075b4cbe6f2f2b6500cf226f20">invoke</a>(obj);         <span class="comment">// successful invoke</span></div>
<div class="line">    method.invoke(obj.get());   <span class="comment">// successful invoke</span></div>
<div class="line">    method.invoke(*obj.get());  <span class="comment">// successful invoke</span></div>
<div class="line"> </div>
<div class="line">    variant var = obj;</div>
<div class="line">    <span class="comment">// or use the variant</span></div>
<div class="line">    method.invoke(var);         <span class="comment">// successful invoke</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p>When you want to use RTTR with a custom wrapper type, you have provide a specialization of the class template <a class="el" href="structrttr_1_1wrapper__mapper.html">wrapper_mapper&lt;T&gt;</a>.</p>
<h1><a class="anchor" id="autotoc_md80"></a>
Set/Get property of a class</h1>
<p>Properties can be also set and get in two steps:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using namespace </span><a class="code" href="namespacerttr.html">rttr</a>;</div>
<div class="line">    </div>
<div class="line">    test_class obj(0);</div>
<div class="line">    <a class="code" href="classrttr_1_1type.html">type</a> class_type = <a class="code" href="classrttr_1_1type.html#a7ba79b9f4916c30db74fe65508dca033">type::get_by_name</a>(<span class="stringliteral">&quot;test_class&quot;</span>);</div>
<div class="line">    <span class="comment">// option 1</span></div>
<div class="line">    <span class="keywordtype">bool</span> success = class_type.<a class="code" href="classrttr_1_1type.html#af57f575909bf13fa24d03ad14393204a">set_property_value</a>(<span class="stringliteral">&quot;value&quot;</span>, obj, 50);</div>
<div class="line">    std::cout &lt;&lt; obj.m_value; <span class="comment">// prints &quot;50&quot;</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// option 2</span></div>
<div class="line">    <span class="keyword">property</span> prop = class_type.<a class="code" href="classrttr_1_1type.html#ae53c4df812c270f3f74b77210bc6a926">get_property</a>(<span class="stringliteral">&quot;value&quot;</span>);</div>
<div class="line">    success = prop.<a class="code" href="classrttr_1_1property.html#a1bb74b1d1910edf6cabec250df8da021">set_value</a>(obj, 24);</div>
<div class="line">    std::cout &lt;&lt; obj.m_value; <span class="comment">// prints &quot;24&quot;</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>In difference to the global properties, a valid type object and an instance (object) of the class is now needed to set and get the value. It doesn't matter in what hierarchy level the object is or if its a pointer, an object on the stack or wrapped inside a variant. RTTR will try to cast the given object to the class type where the property was registered to.</p>
<hr  />
<div type="button" class="btn btn-default doxy-button"><a class="el" href="register_variant_page.html">previous</a></div><div class="btn btn-default doxy-button"><a class="el" href="register_metadata_page.html">next</a></div> </div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="aclassrttr_1_1type_html_a12d900648f71d11873896f58b1f9a3ac"><div class="ttname"><a href="classrttr_1_1type.html#a12d900648f71d11873896f58b1f9a3ac">rttr::type::get_destructor</a></div><div class="ttdeci">destructor get_destructor() const noexcept</div><div class="ttdoc">Returns the corresponding destructor for this type.</div></div>
<div class="ttc" id="aclassrttr_1_1type_html_a24a00513155d3e678454aa349b0caaa7"><div class="ttname"><a href="classrttr_1_1type.html#a24a00513155d3e678454aa349b0caaa7">rttr::type::is_pointer</a></div><div class="ttdeci">bool is_pointer() const noexcept</div><div class="ttdoc">Returns true whether the given type represents a pointer.</div></div>
<div class="ttc" id="aclassrttr_1_1registration_1_1class___html_a1e2a392693ad3d5b62ea85abdd1d6111"><div class="ttname"><a href="classrttr_1_1registration_1_1class__.html#a1e2a392693ad3d5b62ea85abdd1d6111">rttr::registration::class_::property</a></div><div class="ttdeci">bind&lt; detail::prop, Class_Type, A, acc_level, Visitor_List &gt; property(string_view name, A acc, acc_level level=acc_level())</div><div class="ttdoc">Register a property to this class.</div></div>
<div class="ttc" id="aclassrttr_1_1type_html_ae1ed385e76752e7c02ffd9bf5a0ae410"><div class="ttname"><a href="classrttr_1_1type.html#ae1ed385e76752e7c02ffd9bf5a0ae410">rttr::type::get_constructor</a></div><div class="ttdeci">constructor get_constructor(const std::vector&lt; type &gt; &amp;params=std::vector&lt; type &gt;()) const noexcept</div><div class="ttdoc">Returns a public constructor whose parameters match the types in the specified list.</div></div>
<div class="ttc" id="aclassrttr_1_1registration_1_1class___html_a0c0f9b9b4a78e8eefb17f690f15e7795"><div class="ttname"><a href="classrttr_1_1registration_1_1class__.html#a0c0f9b9b4a78e8eefb17f690f15e7795">rttr::registration::class_::constructor</a></div><div class="ttdeci">bind&lt; detail::ctor, Class_Type, acc_level, Visitor_List, Args... &gt; constructor(acc_level level=acc_level())</div><div class="ttdoc">Register a constructor for this class type with or without arguments.</div></div>
<div class="ttc" id="aclassrttr_1_1destructor_html_a93d528bf4496174e7ab046dc714b2846"><div class="ttname"><a href="classrttr_1_1destructor.html#a93d528bf4496174e7ab046dc714b2846">rttr::destructor::invoke</a></div><div class="ttdeci">bool invoke(variant &amp;obj) const noexcept</div><div class="ttdoc">Destroys the contained object in the variant obj.</div></div>
<div class="ttc" id="anamespacerttr_html"><div class="ttname"><a href="namespacerttr.html">rttr</a></div><div class="ttdef"><b>Definition:</b> access_levels.h:33</div></div>
<div class="ttc" id="aclassrttr_1_1registration_1_1class___html_a8bbc90d48413ac8b5e172d9cc4e4019f"><div class="ttname"><a href="classrttr_1_1registration_1_1class__.html#a8bbc90d48413ac8b5e172d9cc4e4019f">rttr::registration::class_::method</a></div><div class="ttdeci">bind&lt; detail::meth, Class_Type, F, acc_level, Visitor_List &gt; method(string_view name, F f, acc_level level=acc_level())</div><div class="ttdoc">Register a method to this class.</div></div>
<div class="ttc" id="aclassrttr_1_1constructor_html"><div class="ttname"><a href="classrttr_1_1constructor.html">rttr::constructor</a></div><div class="ttdoc">The constructor class provides several meta information about a constructor and can be invoked.</div><div class="ttdef"><b>Definition:</b> constructor.h:114</div></div>
<div class="ttc" id="aclassrttr_1_1destructor_html"><div class="ttname"><a href="classrttr_1_1destructor.html">rttr::destructor</a></div><div class="ttdoc">The destructor class provides a destructor for registered types.</div><div class="ttdef"><b>Definition:</b> destructor.h:97</div></div>
<div class="ttc" id="aclassrttr_1_1method_html_aea4351075b4cbe6f2f2b6500cf226f20"><div class="ttname"><a href="classrttr_1_1method.html#aea4351075b4cbe6f2f2b6500cf226f20">rttr::method::invoke</a></div><div class="ttdeci">variant invoke(instance object) const</div><div class="ttdoc">Invokes the method represented by the current instance object.</div></div>
<div class="ttc" id="anamespacerttr_html_a54ecd8bad715cbc451e7aa8491667d4a"><div class="ttname"><a href="namespacerttr.html#a54ecd8bad715cbc451e7aa8491667d4a">rttr::value</a></div><div class="ttdeci">detail::enum_data&lt; Enum_Type &gt; value(string_view, Enum_Type value)</div><div class="ttdoc">The value function should be used to add a mapping from enum name to value during the registration pr...</div></div>
<div class="ttc" id="aclassrttr_1_1registration_html_a45df26a4b45b6715ac17e9a03594c369"><div class="ttname"><a href="classrttr_1_1registration.html#a45df26a4b45b6715ac17e9a03594c369">rttr::registration::public_access</a></div><div class="ttdeci">static const detail::public_access public_access</div><div class="ttdoc">This variable can be used to specify during registration of a class member the access level: public.</div><div class="ttdef"><b>Definition:</b> registration.h:407</div></div>
<div class="ttc" id="aclassrttr_1_1registration_html_a5ac82a82df83ce2dd8c34ada18d7b904"><div class="ttname"><a href="classrttr_1_1registration.html#a5ac82a82df83ce2dd8c34ada18d7b904">rttr::registration::protected_access</a></div><div class="ttdeci">static const detail::protected_access protected_access</div><div class="ttdoc">This variable can be used to specify during registration of a class member the access level: protecte...</div><div class="ttdef"><b>Definition:</b> registration.h:433</div></div>
<div class="ttc" id="aclassrttr_1_1type_html_a4d31b84c050f5b22509c16d0379fe0c7"><div class="ttname"><a href="classrttr_1_1type.html#a4d31b84c050f5b22509c16d0379fe0c7">rttr::type::get_method</a></div><div class="ttdeci">method get_method(string_view name) const noexcept</div><div class="ttdoc">Returns a method with the name name.</div></div>
<div class="ttc" id="aclassrttr_1_1type_html_afc7329cac11337f4022d7d10eebe80d3"><div class="ttname"><a href="classrttr_1_1type.html#afc7329cac11337f4022d7d10eebe80d3">rttr::type::invoke</a></div><div class="ttdeci">variant invoke(string_view name, instance obj, std::vector&lt; argument &gt; args) const</div><div class="ttdoc">Invokes the method represented by the current instance object.</div></div>
<div class="ttc" id="aclassrttr_1_1registration_1_1class___html"><div class="ttname"><a href="classrttr_1_1registration_1_1class__.html">rttr::registration::class_</a></div><div class="ttdoc">The class_ is used to register classes to RTTR.</div><div class="ttdef"><b>Definition:</b> registration.h:154</div></div>
<div class="ttc" id="aclassrttr_1_1type_html_a33bc44604dae75f4368428afabf364ac"><div class="ttname"><a href="classrttr_1_1type.html#a33bc44604dae75f4368428afabf364ac">rttr::type::destroy</a></div><div class="ttdeci">bool destroy(variant &amp;obj) const noexcept</div><div class="ttdoc">Destroys the contained object in the variant obj.</div></div>
<div class="ttc" id="aregistration_8h_html_ac6326400f16225ee15b52eabcaae8130"><div class="ttname"><a href="registration_8h.html#ac6326400f16225ee15b52eabcaae8130">RTTR_REGISTRATION</a></div><div class="ttdeci">#define RTTR_REGISTRATION</div><div class="ttdoc">Use this macro to automatically register your reflection information to RTTR before main is called.</div><div class="ttdef"><b>Definition:</b> registration.h:770</div></div>
<div class="ttc" id="anamespacerttr_html_ab5ab25763f38e207fba4461aeb307e4b"><div class="ttname"><a href="namespacerttr.html#ab5ab25763f38e207fba4461aeb307e4b">rttr::select_const</a></div><div class="ttdeci">auto select_const(ReturnType(ClassType::*func)(Args...) const) -&gt; decltype(func)</div><div class="ttdoc">This is a helper function to register overloaded const member functions.</div><div class="ttdef"><b>Definition:</b> registration.h:592</div></div>
<div class="ttc" id="aclassrttr_1_1type_html_ae53c4df812c270f3f74b77210bc6a926"><div class="ttname"><a href="classrttr_1_1type.html#ae53c4df812c270f3f74b77210bc6a926">rttr::type::get_property</a></div><div class="ttdeci">property get_property(string_view name) const noexcept</div><div class="ttdoc">Returns a property with the name name.</div></div>
<div class="ttc" id="anamespacerttr_html_a1582d7d5b803f7dd5498a4a0166d382d"><div class="ttname"><a href="namespacerttr.html#a1582d7d5b803f7dd5498a4a0166d382d">rttr::select_overload</a></div><div class="ttdeci">Signature * select_overload(Signature *func)</div><div class="ttdoc">This is a helper function to register overloaded functions.</div><div class="ttdef"><b>Definition:</b> registration.h:506</div></div>
<div class="ttc" id="aclassrttr_1_1constructor_html_a9fe7a0a5c6583be4dbf9e7ebf4ca7f5e"><div class="ttname"><a href="classrttr_1_1constructor.html#a9fe7a0a5c6583be4dbf9e7ebf4ca7f5e">rttr::constructor::invoke</a></div><div class="ttdeci">variant invoke() const</div><div class="ttdoc">Invokes the constructor of type returned by get_instantiated_type().</div></div>
<div class="ttc" id="aclassrttr_1_1property_html_a1bb74b1d1910edf6cabec250df8da021"><div class="ttname"><a href="classrttr_1_1property.html#a1bb74b1d1910edf6cabec250df8da021">rttr::property::set_value</a></div><div class="ttdeci">bool set_value(instance object, argument arg) const</div><div class="ttdoc">Set the property of the given instance object to the given value arg.</div></div>
<div class="ttc" id="aclassrttr_1_1method_html"><div class="ttname"><a href="classrttr_1_1method.html">rttr::method</a></div><div class="ttdoc">The method class provides several meta information about a method and can be invoked.</div><div class="ttdef"><b>Definition:</b> method.h:146</div></div>
<div class="ttc" id="aclassrttr_1_1type_html_af57f575909bf13fa24d03ad14393204a"><div class="ttname"><a href="classrttr_1_1type.html#af57f575909bf13fa24d03ad14393204a">rttr::type::set_property_value</a></div><div class="ttdeci">bool set_property_value(string_view name, instance obj, argument arg) const</div><div class="ttdoc">This function will set the given value arg to a property named name to the instance obj.</div></div>
<div class="ttc" id="aclassrttr_1_1variant_html"><div class="ttname"><a href="classrttr_1_1variant.html">rttr::variant</a></div><div class="ttdoc">The variant class allows to store data of any type and convert between these types transparently.</div><div class="ttdef"><b>Definition:</b> variant.h:223</div></div>
<div class="ttc" id="aclassrttr_1_1type_html_ad44572a03514d83035580f516ebaf4e1"><div class="ttname"><a href="classrttr_1_1type.html#ad44572a03514d83035580f516ebaf4e1">rttr::type::create</a></div><div class="ttdeci">variant create(std::vector&lt; argument &gt; args=std::vector&lt; argument &gt;()) const</div><div class="ttdoc">Creates an instance of the current type, with the given arguments args for the constructor.</div></div>
<div class="ttc" id="aclassrttr_1_1variant_html_a7a72579286ed164225c5be882ab6ea81"><div class="ttname"><a href="classrttr_1_1variant.html#a7a72579286ed164225c5be882ab6ea81">rttr::variant::get_type</a></div><div class="ttdeci">type get_type() const</div><div class="ttdoc">Returns the type object of underlying data.</div></div>
<div class="ttc" id="aclassrttr_1_1type_html"><div class="ttname"><a href="classrttr_1_1type.html">rttr::type</a></div><div class="ttdoc">The type class holds the type information for any arbitrary object.</div><div class="ttdef"><b>Definition:</b> type.h:202</div></div>
<div class="ttc" id="aclassrttr_1_1registration_html_a8920352ec53e1cd44bdec18ef5e89568"><div class="ttname"><a href="classrttr_1_1registration.html#a8920352ec53e1cd44bdec18ef5e89568">rttr::registration::private_access</a></div><div class="ttdeci">static const detail::private_access private_access</div><div class="ttdoc">This variable can be used to specify during registration of a class member the access level: private.</div><div class="ttdef"><b>Definition:</b> registration.h:459</div></div>
<div class="ttc" id="aregistration_8h_html_a307051b21da56e1ec8a63f0aa943797e"><div class="ttname"><a href="registration_8h.html#a307051b21da56e1ec8a63f0aa943797e">RTTR_REGISTRATION_FRIEND</a></div><div class="ttdeci">#define RTTR_REGISTRATION_FRIEND</div><div class="ttdoc">Place this macro inside a class, when you need to reflect properties, methods or constructors which a...</div><div class="ttdef"><b>Definition:</b> registration.h:818</div></div>
<div class="ttc" id="aclassrttr_1_1type_html_a7ba79b9f4916c30db74fe65508dca033"><div class="ttname"><a href="classrttr_1_1type.html#a7ba79b9f4916c30db74fe65508dca033">rttr::type::get_by_name</a></div><div class="ttdeci">static type get_by_name(string_view name) noexcept</div><div class="ttdoc">Returns the type object with the given name name.</div></div>
<div class="ttc" id="aclassrttr_1_1registration_1_1class___html_a44ca2d906d9b954c950d7217adeeb41e"><div class="ttname"><a href="classrttr_1_1registration_1_1class__.html#a44ca2d906d9b954c950d7217adeeb41e">rttr::registration::class_::property_readonly</a></div><div class="ttdeci">bind&lt; detail::prop_readonly, Class_Type, A, acc_level, Visitor_List &gt; property_readonly(string_view name, A acc, acc_level level=acc_level())</div><div class="ttdoc">Register a read only property to this class.</div></div>
<div class="ttc" id="arttr__enable_8h_html_a848bcae21d3a54e07ca6450689820a59"><div class="ttname"><a href="rttr__enable_8h.html#a848bcae21d3a54e07ca6450689820a59">RTTR_ENABLE</a></div><div class="ttdeci">#define RTTR_ENABLE(...)</div><div class="ttdoc">This macro is necessary in order to retrieve type information about the inheritance graph of a class.</div><div class="ttdef"><b>Definition:</b> rttr_enable.h:76</div></div>
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/>
<address class="footer">
<small>
Generated on Wed Mar 4 2020 09:24:05 for rttr - 0.9.7 by 
<a href="http://www.doxygen.org/index.html">doxygen</a>.
</small>
</address>
</body>
</html>
